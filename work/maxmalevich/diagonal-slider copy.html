<!-- Диагональный слайдер by Daniel Abros -->
<style>
  html {
    font-size: 0.5208335vw;
  }
  .uc-abros-slider .swiper-container {
    width: 153.3rem;
  }
  .uc-abros-slider .swiper-slide {
    width: 47.9rem;
    display: flex;
    flex-direction: column;
    gap: 2.4rem;
    font-weight: 400;
    font-size: 2.8rem;
    line-height: 1.4;
    letter-spacing: 0.1rem;
    text-align: right;
    color: white;
    font-family: "Roboto";
  }
  .uc-abros-slider .swiper-slide .title {
    width: 48.9rem;
    font-size: 2.8rem;
  }
  .uc-abros-slider .swiper-slide .category {
    position: absolute;
    bottom: 40px;
    left: 30px;
    background-color: white;
    color: black;
    padding: 1px 10px;
    border-radius: 50px;
    font-size: medium;
    font-weight: 100;
  }
  .uc-abros-slider .swiper-slide .img {
    width: 48.9rem;
    height: 54rem;
    object-fit: cover;
    display: block;
    overflow: hidden;
    border-radius: 1.2rem;
  }
  .uc-abros-slider .swiper-slide-active,
  .uc-abros-slider .swiper-slide-prev {
    z-index: -1 !important;
  }
</style>
<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script src="https://cdn.abros.dev/copyright.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const cards = [
      {
        img: "https://static.tildacdn.net/tild6436-3466-4063-a530-346132356463/paykyb8er8ianschneider.jpg",
        link: "https://abros.tilda.ws/maxmalevich",
        title: "Card 1",
        category: "Кухня",
      },
      {
        img: "https://static.tildacdn.net/tild6436-3466-4063-a530-346132356463/paykyb8er8ianschneider.jpg",
        link: "https://abros.tilda.ws/maxmalevich",
        title: "Card 2",
        category: "Офис",
      },
      {
        img: "https://static.tildacdn.net/tild6436-3466-4063-a530-346132356463/paykyb8er8ianschneider.jpg",
        link: "https://abros.tilda.ws/maxmalevich",
        title: "Card 3",
        category: "Спальня",
      },
      {
        img: "https://static.tildacdn.net/tild6436-3466-4063-a530-346132356463/paykyb8er8ianschneider.jpg",
        link: "https://abros.tilda.ws/maxmalevich",
        title: "Card 4",
        category: "Кухня",
      },
    ];
    // Ниже данные не менять
    const block = document.querySelector(".uc-abros-slider");
    const slider = block.querySelector(".swiper-container");
    const wrapper = document.createElement("div");
    wrapper.classList.add("swiper-wrapper");
    slider.appendChild(wrapper);
    const prevBtn = block.querySelector(".prev .tn-atom");
    const nextBtn = block.querySelector(".next .tn-atom");
    const pagination = block.querySelector(".pagination");
    const cur = block.querySelector(".cur .tn-atom");
    const last = block.querySelector(".last .tn-atom");
    const lineSVG = pagination.querySelector(".pagination-path");
    const svg = pagination.querySelector(".pagination-svg");
    cards.forEach((card) => {
      const slide = document.createElement("div");
      slide.classList.add("swiper-slide");
      slide.innerHTML = `
            <h3 class="title">${card.title}</h3>
            <div class="content">
              <img class="img" src="${card.img}">
              <p class="category">${card.category}</p>
            </div>
        `;
      wrapper.appendChild(slide);
    });

    const abrosSwiper = new Swiper(slider, {
      slidesPerView: 1,
      speed: 1200,
      allowTouchMove: true,
      navigation: {
        nextEl: nextBtn,
        prevEl: prevBtn,
      },
      on: {
        init: (swiper) => {
          cur.textContent = `0${swiper.activeIndex + 1}`;
          last.textContent = `0${swiper.slides.length}`;
          if (svg) {
            const svgWidth = 77;
            if (svgWidth) {
              const oneSlideWidth = svgWidth / swiper.slides.length;
              lineSVG?.setAttribute("d", `M0 1H${oneSlideWidth}`);
            }
          }
        },
        slideChange: function (swiper) {
          cur.textContent = `0${swiper.activeIndex + 1}`;
          if (svg) {
            const svgWidth = 77;
            if (svgWidth) {
              const oneSlideWidth = svgWidth / swiper.slides.length;
              const lineWidth = (swiper.activeIndex + 1) * oneSlideWidth;
              lineSVG?.setAttribute("d", `M0 1H${lineWidth}`);
            }
          }
        },
      },
      effect: "creative",
      creativeEffect: {
        limitProgress: 2,
        prev: {
          translate: ["0", "20.1rem", 0],
          opacity: 0,
          zIndex: -1,
        },
        next: {
          translate: ["54.6rem", "-8.5rem", 0],
        },
      },
      breakpoints: {
        1201: {
          allowTouchMove: true,
          slidesPerView: 3,
          creativeEffect: {
            limitProgress: 4,
            progressMultiplier: 1,
            prev: {
              translate: ["0", "20.1rem", 0],
              opacity: 0,
              zIndex: -1,
            },
            next: {
              translate: ["53.6rem", "-8.5rem", 0],
            },
          },
        },
        768: {
          slidesPerView: 1,
          creativeEffect: {
            limitProgress: 2,
            next: {
              translate: ["104.6rem", "-18rem", 0],
            },
          },
        },
      },
    });

    prevBtn.addEventListener("click", () => {
      abrosSwiper.slidePrev();
    });
    nextBtn.addEventListener("click", () => {
      abrosSwiper.slideNext();
    });
  });
</script>
