<!-- Диагональный слайдер by Daniel Abros -->
<style>
  .uc-abros-diagslider .swiper-container {
    width: 153.3rem;
  }
  .uc-abros-diagslider .swiper-slide {
    width: 47.9rem;
    display: flex;
    flex-direction: column;
    gap: 2.4rem;
    font-weight: 400;
    font-size: 2.8rem;
    line-height: 1.4;
    letter-spacing: 0.1rem;
    text-align: right;
    color: white;
  }
  .uc-abros-diagslider .swiper-slide .title {
    width: 48.9rem;
    font-size: 2.8rem;
    color: white;
  }
  .uc-abros-diagslider .swiper-slide .img {
    width: 48.9rem;
    height: 54rem;
    object-fit: cover;
    display: block;
    overflow: hidden;
    border-radius: 1.2rem;
  }
  .uc-abros-diagslider .swiper-slide-active,
  .uc-abros-diagslider .swiper-slide-prev {
    z-index: -1 !important;
  }
</style>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const cards = [
      {
        img: "https://static.tildacdn.com/tild3937-6339-4930-a339-616631316264/Rectangle_726.png",
        link: "https://abros.tilda.ws/maxmalevich",
        title: "Для квартиры",
      },
      {
        img: "https://static.tildacdn.com/tild6530-3961-4231-b462-616136366134/Rectangle_706.jpg",
        link: "https://abros.tilda.ws/maxmalevich",
        title: "Для загородного дома",
      },
      {
        img: "https://static.tildacdn.com/tild6334-3439-4161-b839-333164393964/image_19374.jpg",
        link: "https://abros.tilda.ws/maxmalevich",
        title: "Для офиса",
      },
      {
        img: "https://static.tildacdn.com/tild3338-3334-4533-b861-626632376365/6ltvcljv5cqhl4g9j0px.jpg",
        link: "https://abros.tilda.ws/maxmalevich",
        title: "Для коммерческих пространств",
      },
    ];
    // Ниже данные не менять
    const block = document.querySelector(".uc-abros-diagslider");
    const slider = block.querySelector(".swiper-container");
    const wrapper = document.createElement("div");
    wrapper.classList.add("swiper-wrapper");
    slider.appendChild(wrapper);
    const prevBtn = block.querySelector(".prev .tn-atom");
    const nextBtn = block.querySelector(".next .tn-atom");
    const pagination = block.querySelector(".pagination");
    const cur = block.querySelector(".cur .tn-atom");
    const last = block.querySelector(".last .tn-atom");
    const lineSVG = pagination.querySelector(".pagination-path");
    const svg = pagination.querySelector(".pagination-svg");
    const script = document.querySelector(
      'script[src="https://cdn.abros.dev/copyright.js"]'
    );
    cards.forEach((card) => {
      const slide = document.createElement("div");
      slide.classList.add("swiper-slide");
      slide.innerHTML = `
          <a href="${card.link}">
            <h3 class="title">${card.title}</h3>
            <div class="content">
              <img class="img" src="${card.img}">
            </div>
          </a>
        `;
      wrapper.appendChild(slide);
    });
    if (script) {
      const abrosSwiper = new Swiper(slider, {
        slidesPerView: 1,
        speed: 1200,
        allowTouchMove: true,
        navigation: {
          nextEl: nextBtn,
          prevEl: prevBtn,
        },
        on: {
          init: (swiper) => {
            cur.textContent = `0${swiper.activeIndex + 1}`;
            last.textContent = `0${swiper.slides.length}`;
            if (svg) {
              const svgWidth = 77;
              if (svgWidth) {
                const oneSlideWidth = svgWidth / swiper.slides.length;
                lineSVG?.setAttribute("d", `M0 1H${oneSlideWidth}`);
              }
            }
          },
          slideChange: function (swiper) {
            cur.textContent = `0${swiper.activeIndex + 1}`;
            if (svg) {
              const svgWidth = 77;
              if (svgWidth) {
                const oneSlideWidth = svgWidth / swiper.slides.length;
                const lineWidth = (swiper.activeIndex + 1) * oneSlideWidth;
                lineSVG?.setAttribute("d", `M0 1H${lineWidth}`);
              }
            }
          },
        },
        effect: "creative",
        creativeEffect: {
          limitProgress: 2,
          prev: {
            translate: ["0", "20.1rem", 0],
            opacity: 0,
            zIndex: -1,
          },
          next: {
            translate: ["54.6rem", "-8.5rem", 0],
          },
        },
        breakpoints: {
          1920: {
            slidesPerView: 3,
            creativeEffect: {
              limitProgress: 4,
              progressMultiplier: 1,
              prev: {
                translate: ["0", "20.1rem", 0],
                opacity: 0,
                zIndex: -1,
              },
              next: {
                translate: ["53.6rem", "-8.5rem", 0],
              },
            },
          },
          1536: {
            slidesPerView: 3,
            creativeEffect: {
              limitProgress: 4,
              progressMultiplier: 1,
              prev: {
                translate: ["0", "20.1rem", 0],
                opacity: 0,
                zIndex: -1,
              },
              next: {
                translate: ["53.6rem", "-8.5rem", 0],
              },
            },
          },
          1200: {
            slidesPerView: 2,
            creativeEffect: {
              limitProgress: 4,
              progressMultiplier: 1,
              prev: {
                translate: ["0", "20.1rem", 0],
                opacity: 0,
                zIndex: -1,
              },
              next: {
                translate: ["53.6rem", "-8.5rem", 0],
              },
            },
          },
          768: {
            slidesPerView: 1,
            creativeEffect: {
              limitProgress: 2,
              next: {
                translate: ["104.6rem", "-18rem", 0],
              },
            },
          },
        },
      });

      prevBtn.addEventListener("click", () => {
        abrosSwiper.slidePrev();
      });
      nextBtn.addEventListener("click", () => {
        abrosSwiper.slideNext();
      });
    }
  });
</script>
