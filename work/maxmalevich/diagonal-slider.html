<!-- Диагональный слайдер by Daniel Abros -->
<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script src="https://cdn.abros.dev/copyright.js"></script>
<style>
  html {
    font-size: 0.5208335vw;
  }
  :root {
    --sectionMargin: 20rem;
    --sectionMarginTablet: 32rem;
    --sectionMarginMobile: 24rem;
    --mobileLayout: 375;
    --containerPadding: 4rem;
    --containerPaddingMob: 2rem;
    --containerWidth: 180rem;
    --mainPadding: 9rem;
    --mainPaddingMobile: 18rem;
  }
  section {
    margin-bottom: var(--sectionMargin);
    background-color: #130f0b;
    color: #fff;
  }
  .abrossliderF {
    overflow: hidden;
    font-family: "Roboto";
  }
  .abrossliderF__title {
    width: fit-content;
    margin-right: -7rem;
    margin-bottom: 9.6rem;
    display: flex;
    flex-direction: column;
    text-transform: uppercase;
  }
  .abrossliderF__title span:last-child {
    margin-right: -5rem;
    text-align: end;
  }
  .abrossliderF .container {
    position: relative;
  }
  .abrossliderF__slider {
    width: 153.3rem;
  }
  .abrossliderF__slider-text {
    font-size: 2.8rem;
    letter-spacing: 0.1rem;
    padding-right: 2rem;
  }
  .abrossliderF__slider-bottom {
    position: absolute;
    bottom: 0;
    right: 0;
    display: flex;
    align-items: center;
    width: 127.3rem;
    justify-content: flex-end;
  }
  .abrossliderF__slider-bottom .pagination {
    margin-right: 3rem;
  }
  .abrossliderF__slider-bottom .pagination svg {
    width: 7.7rem;
  }
  .abrossliderF__slider-bottom .navigation {
    margin-right: 3rem;
  }
  .abrossliderF__slider .swiper-slide-active,
  .abrossliderF__slider .swiper-slide-prev {
    z-index: -1 !important;
  }
  .abrossliderF__slider .swiper-slide {
    width: 47.9rem;
    display: flex;
    flex-direction: column;
    gap: 2.4rem;
    font-weight: 400;
    font-size: 2.8rem;
    line-height: 1.4;
    letter-spacing: 0.1rem;
    text-align: right;
  }
  .abrossliderF__slider-img {
    width: 48.9rem;
    height: 54rem;
    border-radius: 1.2rem;
    overflow: hidden;
  }
  @media (max-width: 75em) {
    section {
      margin-bottom: var(--sectionMarginTablet);
    }
  }
  @media (max-width: 47.9375em) {
    section {
      margin-bottom: var(--sectionMarginMobile);
    }
  }
</style>
<section
  class="abrossliderF"
  style="visibility: visible; animation-name: fadeIn"
>
  <div class="container">
    <h2 class="abrossliderF__title h3">
      <span>корпусная</span> <span> мебель</span>
    </h2>
    <div class="abrossliderF__slider swiper-container">
      <div class="swiper-wrapper">
        <!-- Здесь добавлять слайды -->
        <div class="swiper-slide">
          <h5 class="abrossliderF__slider-text h5">Для загородного дома</h5>
          <div class="abrossliderF__slider-img">
            <img
              src="https://static.tildacdn.net/tild6330-3331-4336-b564-373866616563/Rectangle_706.png"
              alt=""
            />
          </div>
        </div>
        <div class="swiper-slide">
          <h5 class="abrossliderF__slider-text h5">Для загородного дома</h5>
          <div class="abrossliderF__slider-img">
            <img
              src="https://static.tildacdn.net/tild6330-3331-4336-b564-373866616563/Rectangle_706.png"
              alt=""
            />
          </div>
        </div>
        <div class="swiper-slide">
          <h5 class="abrossliderF__slider-text h5">Для загородного дома</h5>
          <div class="abrossliderF__slider-img">
            <img
              src="https://static.tildacdn.net/tild6330-3331-4336-b564-373866616563/Rectangle_706.png"
              alt=""
            />
          </div>
        </div>
        <div class="swiper-slide">
          <h5 class="abrossliderF__slider-text h5">Для загородного дома</h5>
          <div class="abrossliderF__slider-img">
            <img
              src="https://static.tildacdn.net/tild6330-3331-4336-b564-373866616563/Rectangle_706.png"
              alt=""
            />
          </div>
        </div>
        <div class="swiper-slide">
          <h5 class="abrossliderF__slider-text h5">Для загородного дома</h5>
          <div class="abrossliderF__slider-img">
            <img
              src="https://static.tildacdn.net/tild6330-3331-4336-b564-373866616563/Rectangle_706.png"
              alt=""
            />
          </div>
        </div>
        <!-- Конец слайдов -->
      </div>
    </div>
    <div class="abrossliderF__slider-bottom">
      <div class="pagination">
        <span class="pagination__number pag-cur">01</span>
        <svg
          width="77"
          height="2"
          viewBox="0 0 77 2"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <line
            y1="0.8"
            x2="77"
            y2="0.8"
            stroke="white"
            stroke-opacity="0.2"
            stroke-width="1.4"
          ></line>
          <path d="M0 1H9.625" stroke="#D3965F" stroke-width="1.4"></path>
        </svg>
        <span class="pagination__number pag-last">08</span>
      </div>
      <div class="navigation">
        <button class="navigation-prev swiper-button-prev"></button>
        <button class="navigation-next swiper-button-next"></button>
      </div>
      <a href="#" class="btn btn__primary">
        <span class="btn__text">Проекты</span>
        <div class="btn__svg-box">
          <svg
            width="54"
            height="12"
            viewBox="0 0 54 12"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M1 5.72266C0.585786 5.72266 0.25 6.05844 0.25 6.47266C0.25 6.88687 0.585786 7.22266 1 7.22266L1 5.72266ZM53.5303 7.00298C53.8232 6.71009 53.8232 6.23521 53.5303 5.94232L48.7574 1.16935C48.4645 0.876458 47.9896 0.876458 47.6967 1.16935C47.4038 1.46224 47.4038 1.93712 47.6967 2.23001L51.9393 6.47265L47.6967 10.7153C47.4038 11.0082 47.4038 11.4831 47.6967 11.776C47.9896 12.0688 48.4645 12.0688 48.7574 11.776L53.5303 7.00298ZM1 7.22266L53 7.22265L53 5.72265L1 5.72266L1 7.22266Z"
              fill="white"
            ></path>
          </svg>
          <div class="btn__svg-box-circle"></div>
        </div>
      </a>
    </div>
  </div>
</section>

<script>
  const furnitureSlider = document.querySelector(".abrossliderF__slider");

  if (furnitureSlider) {
    const pagination = furnitureSlider
      .closest(".container")
      .querySelector(".pagination");
    const cur = furnitureSlider.closest(".container").querySelector(".pag-cur");
    const last = furnitureSlider
      .closest(".container")
      .querySelector(".pag-last");
    const lineSVG = pagination.querySelector("svg path");
    const svg = pagination.querySelector("svg");
    const navFurniture = document.querySelector(".abrossliderF .navigation");

    const furnitureSwiper = new Swiper(furnitureSlider, {
      // modules: [Navigation, Pagination, EffectCreative],
      slidesPerView: 1,
      speed: 1200,
      allowTouchMove: true,
      on: {
        init: (swiper) => {
          cur.textContent = `0${swiper.activeIndex + 1}`;
          last.textContent = `0${swiper.slides.length}`;
          if (svg) {
            const svgWidth = 77;
            console.log(svgWidth);
            if (svgWidth) {
              const oneSlideWidth = svgWidth / swiper.slides.length;
              console.log(oneSlideWidth, svgWidth);
              lineSVG?.setAttribute("d", `M0 1H${oneSlideWidth}`);
            }
          }
        },
        slideChange: function (swiper) {
          console.log(123);
          cur.textContent = `0${swiper.activeIndex + 1}`;
          if (svg) {
            const svgWidth = 77;
            if (svgWidth) {
              const oneSlideWidth = svgWidth / swiper.slides.length;
              const lineWidth = (swiper.activeIndex + 1) * oneSlideWidth;
              console.log(oneSlideWidth, svgWidth);
              lineSVG?.setAttribute("d", `M0 1H${lineWidth}`);
            }
          }
        },
      },
      effect: "creative",
      creativeEffect: {
        limitProgress: 2,

        prev: {
          translate: ["0", "20.1rem", 0],
          opacity: 0,
          zIndex: -1,
        },
        next: {
          translate: ["54.6rem", "-8.5rem", 0],
        },
      },
      pagination: {
        el:
          window.screen.width < 768 &&
          ".abrossliderF__slider-bottom .pagination",
      },
      breakpoints: {
        1201: {
          allowTouchMove: true,
          slidesPerView: 3,
          creativeEffect: {
            limitProgress: 4,
            progressMultiplier: 1,
            prev: {
              translate: ["0", "20.1rem", 0],
              opacity: 0,
              zIndex: -1,
            },
            next: {
              translate: ["53.6rem", "-8.5rem", 0],
            },
          },
        },
        768: {
          slidesPerView: 1,

          creativeEffect: {
            limitProgress: 2,

            next: {
              translate: ["104.6rem", "-18rem", 0],
            },
          },
        },
      },
    });
    navFurniture
      .querySelector(".navigation-prev")
      .addEventListener("click", (e) => {
        furnitureSwiper.slidePrev();
      });
    navFurniture
      .querySelector(".navigation-next")
      .addEventListener("click", (e) => {
        furnitureSwiper.slideNext();
      });
  }
</script>
