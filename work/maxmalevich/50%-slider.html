<!-- 50% слайдер by Daniel Abros -->
<style>
  .abros50slider {
    height: 100%;
  }
  .abros50slider .img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    border-radius: 10px;
  }
  [data-abrosmod="50slider"] .swiper-button-disabled {
    opacity: 0.5;
    pointer-events: none;
  }
</style>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const block = document.querySelector(".uc-abros-50slider-1"); // Class Zero-Block
    const cards = [
      {
        img: "https://static.tildacdn.com/tild3937-6339-4930-a339-616631316264/Rectangle_726.png",
      },
      {
        img: "https://static.tildacdn.com/tild6530-3961-4231-b462-616136366134/Rectangle_706.jpg",
      },
      {
        img: "https://static.tildacdn.com/tild6334-3439-4161-b839-333164393964/image_19374.jpg",
      },
      {
        img: "https://static.tildacdn.com/tild3338-3334-4533-b861-626632376365/6ltvcljv5cqhl4g9j0px.jpg",
      },
      {
        img: "https://static.tildacdn.com/tild3937-6339-4930-a339-616631316264/Rectangle_726.png",
      },
      {
        img: "https://static.tildacdn.com/tild6530-3961-4231-b462-616136366134/Rectangle_706.jpg",
      },
      {
        img: "https://static.tildacdn.com/tild6334-3439-4161-b839-333164393964/image_19374.jpg",
      },
      {
        img: "https://static.tildacdn.com/tild3338-3334-4533-b861-626632376365/6ltvcljv5cqhl4g9j0px.jpg",
      },
    ];
    // Ниже данные не менять
    block.setAttribute("data-abrosmod", "50slider");
    const slider = block.querySelector(".swiper-container");
    const html = block.querySelector(".tn-atom__html");
    html.style.position = "absolute";
    html.style.height = "100%";
    const wrapper = document.createElement("div");
    wrapper.classList.add("swiper-wrapper");
    slider.appendChild(wrapper);
    const prevBtn = block.querySelector(".prev .tn-atom");
    const nextBtn = block.querySelector(".next .tn-atom");
    const pagination = block.querySelector(".pagination");
    const paginationDots = block.querySelector(".swiper-pagination");
    const cur = block.querySelector(".cur .tn-atom");
    const last = block.querySelector(".last .tn-atom");
    const lineSVG = pagination.querySelector(".pagination-path");
    const svg = pagination.querySelector(".pagination-svg");
    const script = document.querySelector(
      'script[src="https://cdn.abros.dev/copyright.js"]'
    );
    cards.forEach((card) => {
      const slide = document.createElement("div");
      slide.classList.add("swiper-slide");
      slide.innerHTML = `<img class="img" src="${card.img}">`;
      wrapper.appendChild(slide);
    });
    if (script) {
      const abrosSwiper = new Swiper(slider, {
        slidesPerView: 1,
        slidesPerGroup: 1,
        effect: "creative",
        creativeEffect: {
          limitProgress: 2,
          perspective: true,
          next: {
            translate: ["20.1rem", 0, -1],
            scale: 0.85,
            shadow: true,
          },
          prev: {
            translate: ["-100%", 0, 0],
          },
        },
        pagination: {
          el: paginationDots,
          clickable: true,
        },
        breakpoints: {
          1200: {
            creativeEffect: {
              limitProgress: 5,
              next: {
                translate: ["21.25rem", 0, -1],
              },
              prev: {
                translate: ["-100%", 0, 0],
              },
            },
          },
        },
        on: {
          init: (swiper) => {
            cur.textContent = `0${swiper.activeIndex + 1}`;
            last.textContent = `0${swiper.slides.length}`;
            const svgWidth = svg.clientWidth;
            if (svgWidth) {
              const oneSlideWidth = svgWidth / swiper.slides.length;
              lineSVG.setAttribute("d", `M0 1H${oneSlideWidth}`);
            }
          },
          slideChange: function (swiper) {
            cur.textContent = `0${swiper.activeIndex + 1}`;
            const svgWidth = svg.clientWidth;
            if (svgWidth) {
              const oneSlideWidth = svgWidth / swiper.slides.length;
              const lineWidth = (swiper.activeIndex + 1) * oneSlideWidth;
              lineSVG.setAttribute("d", `M0 1H${lineWidth}`);
            }
          },
        },
        navigation: {
          nextEl: nextBtn,
          prevEl: prevBtn,
        },
      });
    }
  });
</script>
